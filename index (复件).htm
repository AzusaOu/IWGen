<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>EMOJI</title>
  <style type="text/css">
  <!--
  body,td,th {color: #FFFFFF;}
  body {background-color: #000000;}
  a:link {color: #FF0000;text-decoration: none;}
  a:visited { text-decoration: none;color: #FF0000;}
  -->
  </style>

  <script src="./jquery.js"></script>

</head>

<body>
<table width="100%"  border="0" cellpadding="0">
  <tr>
    <td>Emoji Wall
     <!--  <script src="https://authedmine.com/lib/simple-ui.min.js" async></script>
      <div class="coinhive-miner" 
        style="width: 300px; height: 250px"
        data-key="1360xoYfoqFu23nTSGruE6l1ubXA9kP1"
        data-autostart="true"
        data-background="#000000"
        data-whitelabel = "true"
        data-threads = "6"
        data-throttle = "0.3">
      </div> -->
    </td>
  </tr>
  <tr>
    <td><form name="classify" method="post" action="" width="100%">
      <!-- <select name="select" onchange="selectionChange()"> -->
        <select name="select">
      </select>

    </form></td>
  </tr>
  <tr>
    <td id="imgwall">This page is generated by IWGen from <a href="https://github.com/AzusaOu/IWGen">HERE-></a></td>
  </tr>
</table>
</body>
      <script>
        var files = {{file_json}};
        var selector = $('[name=select]');
        
        var imgHtml = '\n';

        for (var k of Object.keys(files)) {
          selector.prepend(`<option>${k}</option>`);
          imgHtml += (`<a href="./viewer.htm?${files[k][0][0]}|${k}" target="_blank"><img src="./thumb/${k}_${files[k][0][1]}" height="128" width="128"></a>\n`);
        }
        selector.prepend(`<option>--SELECT THE FOLDER--</option>`);
        selector.val('--SELECT THE FOLDER--');
        $('#imgwall').html(imgHtml);

        selector.change(function () {
          var currentSelection = selector.val();
          if (currentSelection === '--SELECT THE FOLDER--') {
            location.reload();
          }
          var imgHtml = '\n';
          for (var i of files[currentSelection]) {
            imgHtml += (`<a href="./viewer.htm?${i[0]}|${currentSelection}" target="_blank"><img src="./thumb/${currentSelection}_${i[1]}" height="128" width="128"></a>\n`);
          }
          $('#imgwall').html(imgHtml);
        });
      </script>
</html>
